<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">
	<!-- namespace 속성 : 현재 공간(영역)에 대한 이름(반드시 지정!) -->

	<resultMap type="Member" id="member_rm">
   
   		<id property="memberNo" column="MEMBER_NO"/>
   		
   		<result property="memberEmail" column="MEMBER_EMAIL"></result>
   		<result property="memberPw" column="MEMBER_PW"></result>
   		<result property="memberName" column="MEMBER_NAME"></result>
   		<result property="memberNickname" column="MEMBER_NICKNAME"></result>
   		<result property="introduce" column="INTRODUCE"></result>
   		<result property="memberTel" column="MEMBER_TEL"></result>
   		<result property="memberAddress" column="MEMBER_ADDRESS"></result>
   		<result property="profileImage" column="PROFILE_IMG"></result>
   		<result property="enrollDate" column="ENROLL_DATE"></result>
   		<result property="memberDeleteYN" column="MEMBER_DEL_YN"></result>
   		<result property="authority" column="AUTHORITY"></result>
   		<result property="birthYear" column="BIRTHYEAR"></result>
   		<result property="loginType" column="LOGIN_TYPE"></result>
   		<result property="birthday" column="BIRTHDAY"></result>
   		<result property="birthYear" column="BIRTHYEAR"></result>
   		<result property="emotion" column="EMOTION"></result>
   		<result property="fontNo" column="FONT_NO"></result>
   		
   		
   		
   		<result property="memberBlockYN" column="MEMBER_BLOCK_YN"></result>
  
 	 </resultMap>
 	 


 	 




	<!-- 로그인 기능 -->
	<select id="login" parameterType="string" resultMap="member_rm">
		SELECT MEMBER_NO, MEMBER_EMAIL, MEMBER_PW, MEMBER_NICKNAME, INTRODUCE, BLOCK_FL,
		MEMBER_TEL,MEMBER_NAME,
		MEMBER_ADDRESS, PROFILE_IMG, AUTHORITY,
		TO_CHAR(ENROLL_DATE, 'YYYY"년" MM"월" DD"일" HH24"시" MI"분" SS"초"') AS ENROLL_DATE,
		BIRTHDAY, MANNER, AUTHORITY
		FROM "MEMBER"
		WHERE MEMBER_DEL_FL = 'N'
		<!-- AND BLOCK_FL = 'N' -->
		AND MEMBER_EMAIL = #{memberEmail}
	</select>



	<!-- 회원가입 입력 정보 제출 서비스 -->
	<insert id="signUp" parameterType="Member">
		INSERT INTO "MEMBER"
		VALUES (SEQ_MEMBER_NO.NEXTVAL,
		#{memberEmail},#{memberPw},#{memberName},#{memberNickname},
		DEFAULT,#{memberTel},#{memberAddress},NULL,DEFAULT,DEFAULT,DEFAULT,
		DEFAULT,#{memberBirth},DEFAULT)
	</insert>

	

	<!-- 회원 ID/PW 찾기 회원조회 -->
	<select id="infoFindSelect" resultType="string">
		SELECT MEMBER_EMAIL
		FROM "MEMBER"
		WHERE MEMBER_NAME = #{memberName}
		AND MEMBER_TEL =#{memberTel}
		AND BLOCK_FL = 'N'
		AND MEMBER_DEL_FL = 'N'
 	 </select>
 	 
 	 <update id="findEmailPw">
		UPDATE "MEMBER" SET
		MEMBER_PW = #{encPw}
		WHERE MEMBER_EMAIL = #{result}
		AND BLOCK_FL = 'N'
		AND MEMBER_DEL_FL = 'N'
 	 </update>
 	 
 	 
 	 
 	 
 	 
 	
  
</mapper>
